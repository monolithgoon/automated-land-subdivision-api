extends index

block parcelized-agcs

	//- PAGE HEADER
	//- include _header

	.agcs-overview-container

		.api-guide-container

			//- img(src="/images/parcelized-agc-data-struc.png" alt="alt")

			.embedded-code-snippet
				h3 Using the Parcelized AGCs API
				p This documentation demonstrates how to call the Parcelized AGCs API using an asynchronous Fetch API call. It is written in JavaScript, and uses object-oriented programming concepts. It returns all the parcelized AGCs from the database.
				pre
					code.language-javascript.
						// Set up the API call function
						async function getParcelizedAgc(agcID) {
							try {
								const apiResponse = await fetch(`https://agc-parcels.herokuapp.com/api/v1/parcelized-agcs/${agcID}`);
								const data = await apiResponse.json();
								return data;
							} 
							catch (error) {
								console.error(error.message);
							}
						}

						// Execute the API call
						getParcelizedAgc('5f42a0d13c83b328e48cee9a')
							.then(function(data) {
								console.log(JSON.stringify(data)));
							}


			.credentials-container
				div.token-subtitle Your API Key 
				br
				div.token-code ADSS=23232AD=ASDIO293-MLK23290-23AD.235DS554S5_4409IODSO

		br
		h2.subtitle= `Parcelized AGCs (${parcelizedAgcsData.length} AGCs)`
		br

		//- LOOP THRU ALL THE AGCS
		each parcelizedAgc in parcelizedAgcsData

			section.agc-cards-container

				main.agc-card

					div.agc-card-header= `${parcelizedAgc.properties.location || 'Nigeria'}`

					br

					div.agc-card-summary
						div.agc-id AGC ID
							div
							a(href=`parcelized-agc/?${parcelizedAgc.properties.agc_id}`)= `${parcelizedAgc.properties.agc_id}`
						div.agc-area AGC Area
							div= `${parcelizedAgc.properties.agc_area.toFixed(1)} ha.`
						//- div.center-coords
						//- div= parcelizedAgc.properties.agc_center_coords
						div.total-allocation Allocations
							div= `${parcelizedAgc.properties.total_allocation.toFixed(1)} ha.`
						div.unused-land Unallocated
							div= `${parcelizedAgc.properties.unused_land_area.toFixed(1)} ha.`

					br

					div.agc-card-features-header Farmers

					br

					div.agc-features-container

						each feature in parcelizedAgc.features	
							div.agc-feature
								div.plot-farmer-id= feature.properties.farmer_id
								//- div= feature.properties.plot_id
								div= `${feature.properties.chunk_size} hectares`
								div= `Lng ${feature.properties.center_lng.toFixed(5)}°E Lat ${feature.properties.center_lat.toFixed(5)}°N`
					//- br