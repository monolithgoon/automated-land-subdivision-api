API Deployment Checklist



[x] Create the following in the root dir >
   [ ] Create server.js
   [ ] Create app.js <= this calls the "routes"
      [ ] Load the routes => eg., const PARCELIZED_AGC_ROUTES = require('./routes/parcelized-agc-routes.js');
      [ ] Mount the router => eg., EXPRESS_APP.use('/api/v1/parcelized-agcs', PARCELIZED_AGC_ROUTES);
   [ ] Create "routes/routers" folder <= this calls the "controllers"
   [ ] Create "controllers" folder <= this calls the "models"
   [ ] Create "models" folder
      [ ] Install npm VALIDATOR package to validate email addresses in user-model.js

   [ ] SERVER SIDE RENDERING
      [ ] Create a "views" folder
      [ ] Set the express app templating engine to "pug" in app.js
         [ ] Point to the "views" directory > EXPRESS_APP.set('views', path.join(__dirname, 'views'));
         [ ] Create middleware to serve static files from "public" folder
      [ ] Create view-controller.js
         [ ] Create the functions that render the .pug files in the 'views' folder
         [ ] Get parcelized-agc data from Atlas DB collection
         [ ] Render the returned parcelized-agc data to the 'agc-render.pug' template
      [ ] Create view-routes.js
         [ ] Import the render functions from view-controller.js
         [ ] Export the ROUTER as viewsRouter
         [ ] Mount the viewRouter on the base url in app.js


[ ] Upload data from local .geojson file to Atlas DB
   [ ] Update and save the "parcelized-agcs.geojson" file
   [ ] Upload the file to database > RUN: npm run exportdb


[x] Install server response (JSON / HTML) compression => npm i compression

[x] Add { "start": "node server.js" } script to package.json in order for Heroku to work
[x] Add latest node version to "engines" in package.json

[ ] Remove all the console.logs

[x] Deploy to Heroku >>
   [ ] Crete a 'start' script in packgage.json > "start": "node server.js"
   [x] Create a new Heroku project > RUN: "heroku create"
      [..] To change default name of Heroku app > RUN: heroku apps:rename [newname]
   [x] Connect to GitHub repo > On Heroku dashboard, select "Deploy" && click on "Connect to GitHub"
   [x] Upload files from "master" repository to Heroku > 
      [x] RUN: "git push heroku master"
      [x] Verify this works, and confirm the remote repos > RUN: git remote -v
   [x] Set environment variables on Heroku (needed b/cos config.eng is excluded from git) > 
      [x] RUN: "heroku config:set NODE_ENV=production"
      [x] RUN: heroku config:set ATLAS_DB_STRING="mongodb+srv://monkey-paw:<PASSWORD>@monkey-paw-cluster-cwcff.gcp.mongodb.net/nirsal_agcs?retryWrites=true&w=majority"
      [x] RUN: heroku config:set ATLAS_DB_PASSOWRD=dooksie

   [ ] Deploy existing git repo. to new Heroku app
      [ ] Change remote directory to deploy to: 
         RUN: heroku git:remote -a [HEROKU_APP_NAME]
      [ ] Deploy to repo: 
         RUN > npm run deploy

[ ] Deploy to Firebase >>
   [x] Install the Firebase CLI >> RUN: npm install -g firebase-tools
   [ ] Initialize Firebase in the project directory >> RUN: firebase init

[ ] Open Heroku project > RUN: "heroku open"